# Template file for 'openvr'
pkgname=openvr
version=1.12.5
revision=1
build_style=cmake
configure_args="-DBUILD_SHARED=ON"
makedepends="glew-devel SDL2-devel"
short_desc="OpenVR SDK"
maintainer="Franc[e]sco <lolisamurai@tfwno.gf>"
license="BSD 3-Clause"
homepage="https://www.steamvr.com/en/"
distfiles="https://github.com/ValveSoftware/openvr/archive/v${version}.tar.gz>${pkgname}-${version}.tar.gz"
checksum=f3cdbaa946688553638e6d65978f156311c9b08825316198d925f5eade6cfeb7

pre_configure() {
	# .so is unversioned by default
	sed -i "s/install(TARGETS \${LIBNAME} DESTINATION lib)/\
		set_target_properties(\${LIBNAME} PROPERTIES VERSION ${version} SOVERSION 1.0.0)\n&/" \
		src/CMakeLists.txt
}

post_install() {
	vlicense LICENSE
}

openvr-devel_package() {
	short_desc+=" - development files"
	depends="${makedepends} ${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/*.so"
		vmove usr/share
	}
}
